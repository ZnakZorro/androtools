<script>
/*	
	function symulacja(){
	var it=window.setInterval(function(){
			var acceleration={};
			acceleration.x=(Math.random()*20)-10;
			acceleration.y=(Math.random()*20)-10;
			acceleration.z=(Math.random()*10);
			acceleration.timestamp=111111;
			//console.log(acceleration);
			onSuccess(acceleration);
			return acceleration;
		},333);
	}
*/
 
 	
function rysuj(acceleration){
		var c=document.getElementById("myCanvas");
		var ctx=c.getContext("2d");

	var dmax=60;
	var xmax=398;
	var ymax=398;
	var pol=200;
	
		try {
			var z=skala(acceleration.z,10);
	    	var x=skala(acceleration.x,20); x=(x-(z/2))+pol);
			var y=skala(acceleration.y,20); y=(y-(z/2))+pol;
			var t=acceleration.timestamp;
		} catch(er)
		{
			var z=Math.round((Math.random()*(dmax*0.8))+(dmax*0.2));
			var x=Math.round((Math.random()*(xmax-z)));
			var y=Math.round((Math.random()*(ymax-z)));	
			var t=Math.random();	
		}
		//console.log(d+ ' ' +xlos+ ' ' +ylos);
	//ctx.fillStyle="#ffffff";
	//ctx.fillRect(0,0,xmax,ymax);
	ctx.clearRect(0, 0,xmax,ymax);	
	ctx.fillStyle="#f00000";
	ctx.fillRect(x,y,z,z);
	$('#accelerometer').innerHTML+='<hr />x='+x+'<br />'+'y='+y+'<br />'+'z='+z+'<br />'+'t='+t;
	
}	
function skala(v,s){
	var a=((v)*s);
	return Math.round(a);
}	
	
</script>